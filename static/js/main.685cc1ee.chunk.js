(this.webpackJsonpecommerce=this.webpackJsonpecommerce||[]).push([[0],{95:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r(9),i=r.n(a),s=r(16),c=r(17),o=r(20),d=r(19),u=r(44),l=r(12),p=r(5),b=r(143),h=r(144),j=r(138),f=r(131),m=r(21),O=r(36),v=r(141),g=r(135),x=r(137),R=r(136),y="http://localhost:3001",P=r(4),F=function(t){Object(o.a)(r,t);var e=Object(d.a)(r);function r(t){return Object(s.a)(this,r),e.call(this,t)}return Object(c.a)(r,[{key:"render",value:function(){var t=this.props,e=t.classes,r=t.item;return Object(P.jsx)(f.a,{item:!0,xs:3,className:e.grid,children:Object(P.jsxs)(g.a,{className:e.card,children:[Object(P.jsx)(R.a,{className:e.media,image:"".concat(y,"/images/").concat(r.image),title:r.name}),Object(P.jsxs)(x.a,{children:[Object(P.jsx)(j.a,{gutterBottom:!0,align:"center",children:r.brand+" "+r.model}),Object(P.jsxs)(j.a,{component:"p",align:"center",children:["Price : ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumSignificantDigits:3}).format(r.price)]})]})]},r.id)})}}]),r}(n.Component),S=Object(p.a)((function(t){return{card:{maxWidth:300},media:{height:0,paddingTop:"56.25%"},button:{marginTop:0,marginBottom:0,marginRight:"auto",marginLeft:"auto"},grid:{marginTop:20,marginLeft:30}}}))(F),C=r(146),L=function(t){Object(o.a)(r,t);var e=Object(d.a)(r);function r(t){var n;return Object(s.a)(this,r),(n=e.call(this,t)).updateSearchTerm=function(t){var e=t.target.value?t.target.value.toLowerCase():"",r=n.props.products.filter((function(t){return t&&(t.brand&&1==t.brand.toLowerCase().includes(e)||t.model&&!0===t.model.toLowerCase().includes(e))}));n.props.updateFilteredProducts(r),n.setState({searchTerm:e})},n.props=t,n.state={searchTerm:""},n}return Object(c.a)(r,[{key:"render",value:function(){var t=this,e=this.props.classes;return Object(P.jsx)("div",{className:e.root,children:Object(P.jsx)(C.a,{id:"outlined-search",label:"Search - Brand/Model",className:e.range,value:this.state.searchTerm,name:"searchBox",margin:"normal",variant:"outlined",onChange:function(e){return t.updateSearchTerm(e)},disabled:this.props.isFilterActive})})}}]),r}(n.Component),k=Object(p.a)((function(t){return{root:{flexGrow:1}}}))(L),T=function(t){Object(o.a)(r,t);var e=Object(d.a)(r);function r(t){var n;return Object(s.a)(this,r),(n=e.call(this,t)).props=t,n.state={filteredProductsList:[],page:1,prevY:0},n}return Object(c.a)(r,[{key:"componentDidMount",value:function(){var t=this.props.filteredProducts;t&&t.length>0?this.setState({filteredProductsList:t}):this.props.fetchProducts(this.state.page);this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef)}},{key:"componentDidUpdate",value:function(t,e){t.filteredProducts!==this.props.filteredProducts&&this.props.filteredProducts&&this.setState({filteredProductsList:this.props.filteredProducts})}},{key:"handleObserver",value:function(t,e){var r=t[0].boundingClientRect.y;if(this.state.prevY>r&&this.props.products.length==this.state.filteredProductsList.length&&0==this.props.isFilterActive){var n=Math.floor(this.state.filteredProductsList.length/5)+1;this.props.fetchProducts(n),this.setState({page:n})}this.setState({prevY:r})}},{key:"render",value:function(){var t=this,e=this.props.classes;return Object(P.jsxs)("div",{className:e.root,children:[Object(P.jsx)(v.a,{children:Object(P.jsx)(k,{filteredProducts:this.props.filteredProducts,products:this.props.products,updateFilteredProducts:this.props.updateFilteredProducts,isFilterActive:this.props.isFilterActive})}),Object(P.jsx)(f.a,{container:!0,children:this.state.filteredProductsList.map((function(t){return Object(P.jsx)(S,{item:t},t.id)}))}),Object(P.jsx)("div",{ref:function(e){return t.loadingRef=e}})]})}}]),r}(n.Component),w=Object(p.a)((function(t){return{root:{flexGrow:1}}}))(T),A=r(53),D=r.n(A),B=r(66),E="FETCH_PRODUCTS",N="UPDATE_FILTERED_PRODUCTS",M="SET_FILTER_DETAILS",I=function(t){return function(e){e(function(t){return{type:N,payload:t}}(t))}},U=Object(l.e)(Object(O.b)((function(t){var e=t.inventoryReducer,r=t.filtersReducer;return{filteredProducts:e.filteredProducts,products:e.products,isFilterActive:r.isActive}}),(function(t){return{fetchProducts:function(e){t(function(t){return function(){var e=Object(B.a)(D.a.mark((function e(r){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(y,"/fetch?currentPage=").concat(t,"&pageSize=6"),{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:(n=e.sent).data.length>0&&r((a=n.data,{type:E,payload:a})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}var a}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()}(e))},updateFilteredProducts:function(e){t(I(e))}}}))((function(t){return Object(P.jsx)(w,Object(m.a)({},t))}))),_=r(148),G=r(145),Y=r(149),J=r(142),W=function(t){Object(o.a)(r,t);var e=Object(d.a)(r);function r(t){var n;return Object(s.a)(this,r),(n=e.call(this,t)).addFilter=function(t){"rangeMin"==t.name?n.setState({minRange:t.value}):"rangeMax"==t.name?n.setState({maxRange:t.value}):"brand"==t.name&&n.setState({brand:t.value})},n.applyFilters=function(){var t=n.props.products;(n.state.minRange&&n.state.maxRange||n.state.brand)&&(n.state.minRange&&n.state.maxRange&&(t=n.filterProductsByPriceRange(t)),n.state.brand&&(t=n.filterProductsByBrand(t)),n.props.updateFilteredProducts(t),n.props.updateFilterDetails({isActive:!0,brand:n.state.brand,minRange:n.state.minRange,maxRange:n.state.maxRange}),n.setState({filters:!0}))},n.clearFilters=function(){n.setState({minRange:"",maxRange:"",brand:""}),n.props.updateFilteredProducts(n.props.products),n.props.updateFilterDetails({isActive:!1,brand:"",minRange:"",maxRange:""}),n.setState({filters:!1})},n.filterProductsByPriceRange=function(t){return t=t.filter((function(t){return t.price>n.state.minRange&&t.price<n.state.maxRange}))},n.filterProductsByBrand=function(t){return t=t.filter((function(t){return t.brand.includes(n.state.brand)}))},n.props=t,n.state={minRange:"",maxRange:"",brand:"",brandsList:[],filters:!1},n}return Object(c.a)(r,[{key:"componentDidMount",value:function(){var t=[];this.props.products&&this.props.products.forEach((function(e){0==t.includes(e.brand)&&t.push(e.brand)})),this.props.filtersReducer&&this.setState({minRange:this.props.filtersReducer.minRange,maxRange:this.props.filtersReducer.maxRange,brand:this.props.filtersReducer.brand,filters:this.props.filtersReducer.isActive}),this.setState({brandsList:t})}},{key:"componentDidUpdate",value:function(t,e){if(t.products!==this.props.products){var r=[];this.props.products.forEach((function(t){0==r.includes(t.brand)&&r.push(t.brand)})),this.setState({brandsList:r})}}},{key:"render",value:function(){var t=this;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("br",{}),Object(P.jsx)(j.a,{component:"h3",variant:"subtitle2",color:"inherit",children:"Price Range"}),Object(P.jsx)(C.a,{id:"outlined-name",label:"Min",value:this.state.minRange,name:"rangeMin",margin:"normal",variant:"outlined",onChange:function(e){return t.addFilter(e.target)},disabled:this.state.filters}),Object(P.jsx)(C.a,{id:"outlined-name",label:"Max",name:"rangeMax",value:this.state.maxRange,onChange:function(e){return t.addFilter(e.target)},margin:"normal",variant:"outlined",disabled:this.state.filters}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)(_.a,{id:"brandLabel",children:"Brand"}),Object(P.jsx)(G.a,{labelId:"brandLabel",id:"brand",value:this.state.brand,name:"brand",onChange:function(e){return t.addFilter(e.target)},className:this.props.classes.selectEmpty,disabled:this.state.filters,children:this.state.brandsList.map((function(t,e){return Object(P.jsx)(Y.a,{value:t,children:t},e)}))}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),0==this.state.filters?Object(P.jsx)(J.a,{variant:"contained",color:"primary",onClick:this.applyFilters,children:"Apply Filters"}):Object(P.jsx)(J.a,{variant:"contained",color:"primary",onClick:this.clearFilters,children:"Clear Filters"})]})}}]),r}(n.Component),z=Object(p.a)((function(t){return{range:{width:"50%"},selectEmpty:{marginTop:t.spacing(2),minWidth:120}}}))(W),H=function(t){return function(e){e(function(t){return{type:M,payload:t}}(t))}},q=Object(l.e)(Object(O.b)((function(t){var e=t.inventoryReducer,r=t.filtersReducer;return{filteredProducts:e.filteredProducts,products:e.products,filtersReducer:r}}),(function(t){return{updateFilteredProducts:function(e){t(I(e))},updateFilterDetails:function(e){t(H(e))}}}))((function(t){return Object(P.jsx)(z,Object(m.a)({},t))}))),K=function(t){Object(o.a)(r,t);var e=Object(d.a)(r);function r(){return Object(s.a)(this,r),e.apply(this,arguments)}return Object(c.a)(r,[{key:"render",value:function(){return Object(P.jsx)("div",{children:Object(P.jsxs)(f.a,{container:!0,children:[Object(P.jsx)(f.a,{item:!0,xs:9,children:Object(P.jsx)(U,{})}),Object(P.jsx)(f.a,{item:!0,xs:3,children:Object(P.jsx)(q,{})})]})})}}]),r}(n.Component),Q=function(t){Object(o.a)(r,t);var e=Object(d.a)(r);function r(t){return Object(s.a)(this,r),e.call(this,t)}return Object(c.a)(r,[{key:"render",value:function(){var t=this.props.classes;return Object(P.jsx)(u.a,{children:Object(P.jsxs)("div",{className:t.root,children:[Object(P.jsx)(b.a,{position:"static",color:"primary",children:Object(P.jsx)(h.a,{children:Object(P.jsx)(j.a,{className:"title",color:"inherit",children:"Cars24"})})}),Object(P.jsx)(l.a,{path:"/",exact:!0,children:Object(P.jsx)(K,{})})]})})}}]),r}(n.Component),V=Object(p.a)({root:{flexGrow:1}})(Q),X=r(67),Z=r(24),$=r(68),tt={products:[],filteredProducts:[]},et={isActive:!1,brand:"",minRange:"",maxRange:""},rt=Object(Z.c)({inventoryReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case E:return Object(m.a)(Object(m.a)({},t),{},{products:t.products.concat(e.payload),filteredProducts:t.filteredProducts.concat(e.payload)});case N:return Object(m.a)(Object(m.a)({},t),{},{filteredProducts:e.payload});default:return t}},filtersReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case M:return Object(m.a)(Object(m.a)({},t),{},{isActive:e.payload.isActive,brand:e.payload.brand,minRange:e.payload.minRange,maxRange:e.payload.maxRange});default:return t}}}),nt=r(56),at=(r(92),r(69)),it=r.n(at),st=[];st.push($.a);var ct={key:"root",storage:it.a,whitelist:["inventoryReducer","filtersReducer"]},ot=Object(nt.a)(ct,rt),dt=Object(Z.d)(ot,Z.a.apply(void 0,st)),ut=Object(nt.b)(dt),lt=function(t){var e=t.children,r=t.isServer;return Object(P.jsx)(O.a,{store:dt,children:Object(P.jsx)(X.a,{loading:r?e:null,persistor:ut,children:e})})};i.a.render(Object(P.jsx)(lt,{children:Object(P.jsx)(V,{})}),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.685cc1ee.chunk.js.map